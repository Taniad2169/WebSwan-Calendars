<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Web Swan Business Calendar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Pacifico&display=swap" rel="stylesheet">
  <style>
    /* Full-screen calendar container */
    .calendar-container {
      width: 100vw;       /* 100% of viewport width */
      height: 100vh;      /* 100% of viewport height */
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Calendar element fills container */
    #calendar {
      width: 100%;
      height: 100%;
      max-width: 100%;
      max-height: 100%;
      padding: 10px; /* optional inner padding */
    }

    /* Responsive adjustments for small devices */
    @media (max-width: 768px) {
      #calendar {
        font-size: 16px; /* adjust text size */
      }
    }

    /* Optional: make arrows/buttons larger for mobile usability */
    .calendar-nav {
      font-size: 1.5em;
    }

    /* ------------------------------------- */
    /* THEWEBSWANCALENDAR.html original styles */

    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        color: #333;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }

    .main-header {
        background: #007bff;
        color: white;
        padding: 1rem;
        text-align: center;
        border-radius: 8px 8px 0 0;
        position: relative;
    }
    .main-header .back-btn {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
    }

    .calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 10px;
        background: white;
        padding: 20px;
        border-radius: 0 0 8px 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .day {
        padding: 10px;
        text-align: center;
        border: 1px solid #ddd;
        border-radius: 4px;
        position: relative;
    }

    .day-number {
        font-weight: bold;
        font-size: 1.2em;
        margin-bottom: 5px;
    }

    .appointments-list {
        list-style: none;
        padding: 0;
        margin-top: 5px;
        font-size: 0.8em;
    }

    .appointment-item {
        background: #e9ecef;
        padding: 3px 5px;
        border-radius: 3px;
        margin-bottom: 2px;
    }

    .modal {
        display: none;
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
    }

    .modal.show {
        display: flex;
    }

    .modal-content {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        width: 90%;
        max-width: 500px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        position: relative;
    }

    .close-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 1.5em;
        cursor: pointer;
    }

    .appointment-status.booked {
        background-color: #ffc107;
    }

    .appointment-status.blocked {
        background-color: #dc3545;
        color: white;
    }

    .nav-buttons {
        text-align: center;
        margin-bottom: 20px;
    }
    
    .nav-buttons button, .btn {
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    .weekdays {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 10px;
        font-weight: bold;
        text-align: center;
        margin-bottom: 10px;
    }

    .day-with-appointments {
      background-color: #e2f4ff;
    }
    
    .modal-link {
        color: #007bff;
        cursor: pointer;
        text-decoration: underline;
    }
    
    #adminPanel {
        margin-top: 20px;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .admin-buttons {
        display: flex;
        justify-content: space-around;
        margin-top: 20px;
    }

    .admin-buttons button {
        padding: 10px 20px;
        font-size: 1em;
    }

    .back-office-link {
        display: block;
        text-align: center;
        margin-top: 20px;
    }

    /* Back-office styles */
    .back-office-header {
      background-color: #28a745;
    }

    .back-office-header h1 {
      font-family: 'Pacifico', cursive;
    }

    /* Admin-specific styles */
    #adminCalendar .day:hover {
        background-color: #f0f0f0;
        cursor: pointer;
    }
    #adminCalendar .day.has-appointment {
        background-color: #e9ffea;
    }
    #adminCalendar .day.blocked {
        background-color: #ffcccc;
    }

    /* Blocked date/time modal */
    .blocked-times-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    .blocked-times-list li {
        padding: 8px;
        border-bottom: 1px solid #eee;
    }
    .blocked-times-list li:last-child {
        border-bottom: none;
    }

    .task-container {
        margin-top: 20px;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .task-list {
        list-style: none;
        padding: 0;
    }
    .task-list li {
        padding: 8px;
        border-bottom: 1px solid #eee;
    }
    .task-list li:last-child {
        border-bottom: none;
    }

    /* Styles for the bell notification */
    .bell-animated {
        font-size: 2rem;
        position: absolute;
        top: 10px;
        animation: bell-move 4s ease-in-out infinite;
    }

    @keyframes bell-move {
        0% { transform: translateX(-100px); opacity: 0; }
        50% { transform: translateX(0); opacity: 1; }
        100% { transform: translateX(100px); opacity: 0; }
    }

    @keyframes bell-ring {
        0% { transform: rotate(0); }
        15% { transform: rotate(15deg); }
        30% { transform: rotate(-15deg); }
        45% { transform: rotate(15deg); }
        60% { transform: rotate(-15deg); }
        75% { transform: rotate(0); }
        100% { transform: rotate(0); }
    }

    .bell-ring-animation {
        animation: bell-ring 1s ease-in-out;
    }

    /* Admin login modal styling */
    #adminLoginModal .modal-content {
        text-align: center;
    }

    #adminLoginModal label {
        display: block;
        margin-bottom: 10px;
        font-weight: bold;
    }

    #adminLoginModal input[type="password"] {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        margin-bottom: 15px;
        box-sizing: border-box;
    }

    #adminLoginModal button {
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    #adminLoginModal button:hover {
        background-color: #0056b3;
    }

  </style>
</head>
<body>

<div class="container">
  <header class="main-header">
    <h1 id="site-title">The Web Swan Calendar</h1>
    <span id="bell-emoji" class="bell-animated" style="left: 50%; display: none;">ðŸ””</span>
  </header>
  
  <div class="nav-buttons">
    <button id="prevMonth">Previous</button>
    <span id="currentMonthYear"></span>
    <button id="nextMonth">Next</button>
    <button id="adminLoginBtn" class="btn" style="margin-left: 20px;">Admin</button>
  </div>
  
  <div class="weekdays">
    <span>Sun</span><span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
  </div>
  
  <div id="calendar" class="calendar-grid"></div>

  <div id="bookingModal" class="modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <h2>Book Appointment for <span id="bookingDate"></span></h2>
      <label for="bookingName">Your Name:</label>
      <input type="text" id="bookingName" placeholder="Enter your name" required>
      <label for="bookingTime">Select Time:</label>
      <select id="bookingTime"></select>
      <button id="saveBooking">Book Now</button>
    </div>
  </div>

  <div id="adminModal" class="modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <h2>Admin Panel</h2>
      <div id="appointmentsList"></div>
    </div>
  </div>

  <div id="contactModal" class="modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <h2>Contact Us</h2>
      <form id="contactForm">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br><br>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required><br><br>
        <label for="message">Message:</label>
        <textarea id="message" name="message" required></textarea><br><br>
        <button type="submit">Send Message</button>
      </form>
    </div>
  </div>

  <div id="blockModal" class="modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <h2>Block a Day or Time Slot</h2>
      <p>Selected Day: <span id="blockedDayDate"></span></p>
      <button id="blockFullDay">Block Full Day</button>
      <hr>
      <label for="blockTimeSelect">Block Time Slot:</label>
      <select id="blockTimeSelect"></select>
      <button id="blockTime">Block Time</button>
    </div>
  </div>

  <div id="taskModal" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2>Your Tasks</h2>
        <input type="text" id="taskInput" placeholder="Enter new task" />
        <button id="addTaskBtn">Add Task</button>
        <ul id="tasksList" class="task-list"></ul>
    </div>
  </div>

  <div id="blockedDaysModal" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2>Blocked Days</h2>
        <ul id="blockedDaysList" class="blocked-times-list"></ul>
    </div>
  </div>

  <div id="adminLoginModal" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2>Admin Login</h2>
        <div>
            <label for="adminPassword">Password:</label>
            <input type="password" id="adminPassword" placeholder="Enter admin password" required>
            <button id="adminLoginSubmit">Login</button>
            <div id="adminError" style="color: red; margin-top: 10px; display: none;">Incorrect password. Please try again.</div>
        </div>
    </div>
  </div>

</div>

<script>
    const calendarBody = document.getElementById('calendar');
    const currentMonthYearEl = document.getElementById('currentMonthYear');
    const prevMonthBtn = document.getElementById('prevMonth');
    const nextMonthBtn = document.getElementById('nextMonth');
    const bookingModal = document.getElementById('bookingModal');
    const bookingDateEl = document.getElementById('bookingDate');
    const bookingTimeSelect = document.getElementById('bookingTime');
    const saveBookingBtn = document.getElementById('saveBooking');
    const appointmentsList = document.getElementById('appointmentsList');
    const adminModal = document.getElementById('adminModal');
    const blockModal = document.getElementById('blockModal');
    const blockedDayDateEl = document.getElementById('blockedDayDate');
    const blockTimeSelect = document.getElementById('blockTimeSelect');
    const blockFullDayBtn = document.getElementById('blockFullDay');
    const blockTimeBtn = document.getElementById('blockTime');
    const tasksList = document.getElementById('tasksList');
    const addTaskBtn = document.getElementById('addTaskBtn');
    const taskInput = document.getElementById('taskInput');
    const taskModal = document.getElementById('taskModal');
    const blockedDaysList = document.getElementById('blockedDaysList');
    const adminLoginBtn = document.getElementById('adminLoginBtn');
    const adminLoginModal = document.getElementById('adminLoginModal');
    const adminPassword = document.getElementById('adminPassword');
    const adminLoginSubmit = document.getElementById('adminLoginSubmit');
    const adminError = document.getElementById('adminError');

    let appointments = JSON.parse(localStorage.getItem('appointments')) || [];
    let blockedDays = JSON.parse(localStorage.getItem('blockedDays')) || [];
    let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
    let currentDate = new Date();

    const bellEmojiEl = document.getElementById('bell-emoji');
    const bellSound = new Audio('elegant_bell.mp3');

    function showBellNotification() {
        bellEmojiEl.style.display = 'inline';
        bellEmojiEl.classList.add('bell-ring-animation');
        bellSound.play();
        setTimeout(() => {
            bellEmojiEl.classList.remove('bell-ring-animation');
            bellEmojiEl.style.display = 'none';
        }, 3000); // Hide after 3 seconds
    }

    function renderMonthCalendar(date, calendarElement, monthYearElement) {
        const year = date.getFullYear();
        const month = date.getMonth();
        
        monthYearElement.textContent = date.toLocaleString('default', { month: 'long', year: 'numeric' });
        calendarElement.innerHTML = '';
        
        const firstDay = new Date(year, month, 1);
        const lastDay = new Date(year, month + 1, 0);
        const daysInMonth = lastDay.getDate();

        for (let i = 0; i < firstDay.getDay(); i++) {
            calendarElement.innerHTML += '<div></div>';
        }

        for (let day = 1; day <= daysInMonth; day++) {
            const dayEl = document.createElement('div');
            dayEl.classList.add('day');
            dayEl.innerHTML = `<span class="day-number">${day}</span>`;
            
            const fullDate = new Date(year, month, day);
            const dateStr = fullDate.toISOString().split('T')[0];

            const dayAppointments = appointments.filter(a => a.date === dateStr);
            const dayIsBlocked = blockedDays.some(b => b.date === dateStr && b.isFullDay);
            const dayHasTasks = tasks.some(t => t.date === dateStr);

            if (dayIsBlocked) {
                dayEl.classList.add('blocked');
            } else if (dayAppointments.length > 0) {
                dayEl.classList.add('day-with-appointments');
            } else if (dayHasTasks) {
                dayEl.classList.add('has-tasks');
            }

            const dayTimesBlocked = blockedDays.filter(b => b.date === dateStr && !b.isFullDay);

            dayEl.addEventListener('click', () => {
                if (dayIsBlocked) {
                    alert('This day is blocked.');
                    return;
                }
                openBookingModal(dateStr, dayTimesBlocked);
            });
            calendarElement.appendChild(dayEl);
        }
    }

    function openBookingModal(dateStr, blockedTimes) {
        bookingDateEl.textContent = dateStr;
        bookingTimeSelect.innerHTML = '';
        
        for (let i = 9; i <= 17; i++) {
            const time = `${String(i).padStart(2, '0')}:00`;
            const isBlocked = blockedTimes.some(b => b.time === time);
            if (!isBlocked) {
                const option = document.createElement('option');
                option.value = time;
                option.textContent = time;
                bookingTimeSelect.appendChild(option);
            }
        }
        bookingModal.classList.add('show');
    }

    function renderAdminAppointments() {
        appointmentsList.innerHTML = '';
        appointments.forEach(app => {
            const li = document.createElement('li');
            li.textContent = `${app.date} at ${app.time} for ${app.name}`;
            appointmentsList.appendChild(li);
        });
    }

    saveBookingBtn.addEventListener('click', () => {
        const name = document.getElementById('bookingName').value;
        const time = bookingTimeSelect.value;
        const date = bookingDateEl.textContent;
        if (name && time && date) {
            const newAppointment = { date, time, name };
            appointments.push(newAppointment);
            localStorage.setItem('appointments', JSON.stringify(appointments));
            alert('Appointment booked successfully!');
            bookingModal.classList.remove('show');
            renderMonthCalendar(currentDate, calendarBody, currentMonthYearEl);
            showBellNotification(); // Trigger the notification here
        } else {
            alert('Please fill out all fields.');
        }
    });

    prevMonthBtn.addEventListener('click', () => {
        currentDate.setMonth(currentDate.getMonth() - 1);
        renderMonthCalendar(currentDate, calendarBody, currentMonthYearEl);
    });

    nextMonthBtn.addEventListener('click', () => {
        currentDate.setMonth(currentDate.getMonth() + 1);
        renderMonthCalendar(currentDate, calendarBody, currentMonthYearEl);
    });

    function renderBlockedDaysList() {
        blockedDaysList.innerHTML = '';
        blockedDays.forEach(block => {
            const li = document.createElement('li');
            li.textContent = `${block.date} - ${block.isFullDay ? 'Full Day' : block.time}`;
            blockedDaysList.appendChild(li);
        });
    }

    function renderTasks() {
        tasksList.innerHTML = '';
        tasks.forEach(t => {
            const li = document.createElement('li');
            li.textContent = `${t.date} â€” ${t.text}`;
            tasksList.appendChild(li);
        });
    }

    document.getElementById('contactForm').addEventListener('submit', function(e) {
        e.preventDefault();
        alert('Thank you for your message! We will get back to you shortly.');
        this.reset();
    });

    // Admin login functionality
    adminLoginBtn.addEventListener('click', () => {
        adminLoginModal.classList.add('show');
        adminPassword.value = '';
        adminError.style.display = 'none';
    });

    adminLoginSubmit.addEventListener('click', () => {
        const password = adminPassword.value;
        if (password === 'adminpass') {
            window.location.href = 'index1.html';
        } else {
            adminError.style.display = 'block';
            adminPassword.value = '';
        }
    });

    // Allow Enter key to submit admin login
    adminPassword.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            adminLoginSubmit.click();
        }
    });

    Array.from(document.querySelectorAll('.modal')).forEach(function(modal) {
        modal.addEventListener('click', function(e) {
            if (e.target === modal) modal.classList.remove("show");
        });
    });

    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            document.getElementById('adminModal').classList.remove("show");
            document.getElementById('bookingModal').classList.remove("show");
            document.getElementById('blockModal').classList.remove("show");
            document.getElementById('taskModal').classList.remove("show");
            document.getElementById('contactModal').classList.remove("show");
            document.getElementById('blockedDaysModal').classList.remove("show");
            document.getElementById('adminLoginModal').classList.remove("show");
        }
    });

    renderMonthCalendar(currentDate, calendarBody, currentMonthYearEl);
    renderBlockedDaysList();
    renderTasks();
</script>
</body>
</html>
